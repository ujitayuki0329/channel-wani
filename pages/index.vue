<template>
  <div class="page-index">
    <AppHero />
    
    <!-- Modal Components -->
    <AppModal :is-open="isCalendarModalOpen" @close="closeCalendarModal">
      <NuxtImg src="/images/calender.jpg" alt="ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼" class="modal-image" />
    </AppModal>
    
    <AppModal :is-open="isFloorMapModalOpen" @close="closeFloorMapModal">
      <NuxtImg src="/images/floar-map.jpg" alt="ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—" class="modal-image" />
    </AppModal>
    
    <!-- About Section -->
    <section id="about" class="section about">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title">æ·±è°·çˆ¬è™«é¡é¤¨ã¨ã¯</h2>
          <p class="section-subtitle">çˆ¬è™«é¡ã®é­…åŠ›ã‚’ä¼ãˆã‚‹å°‚é–€æ–½è¨­</p>
        </div>
        <div class="about-content">
          <div class="about-text">
            <h3>æ·±è°·çˆ¬è™«é¡é¤¨ã¸ã‚ˆã†ã“ã</h3>
            <p>
              æ·±è°·çˆ¬è™«é¡é¤¨ã¯ã€ãƒˆã‚«ã‚²ã‚„ãƒ˜ãƒ“ã€ã‚«ãƒ¡ã‚„ãƒ¯ãƒ‹ã¾ã§æ§˜ã€…ãªçˆ¬è™«é¡ã‚„ä¸¡ç”Ÿé¡ãªã©ã®ç”Ÿãç‰©é”ã‚’é–“è¿‘ã§è¦‹ã¦ã€
              è§¦ã‚Œã¦ã€é¤Œã‚„ã‚Šãªã©ã®ä½“é¨“ãŒå‡ºæ¥ã‚‹å±•ç¤ºæ–½è¨­ã§ã™ã€‚
            </p>
            <p>
              å±•ç¤ºç”Ÿä½“æ•°ã¯100ç¨®é¡ä»¥ä¸Šã€‚æ™®æ®µãªã‹ãªã‹è¦‹ã‚‹ã“ã¨ã®å‡ºæ¥ãªã„ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªç”Ÿãç‰©é”ã‚’ã˜ã£ãã‚Šè¦³å¯Ÿã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ
            </p>
            <div class="features">
              <div class="feature-card">
                <div class="feature-icon">ğŸ</div>
                <h4>100ç¨®é¡ä»¥ä¸Šã®å±•ç¤º</h4>
                <p>æ§˜ã€…ãªç¨®é¡ã®çˆ¬è™«é¡ã‚’å±•ç¤º</p>
              </div>
              <div class="feature-card">
                <div class="feature-icon">ğŸ¤</div>
                <h4>è§¦ã‚Œåˆã„ä½“é¨“</h4>
                <p>å®Ÿéš›ã«è§¦ã‚Œåˆãˆã‚‹ä½“é¨“</p>
              </div>
              <div class="feature-card">
                <div class="feature-icon">ğŸ–</div>
                <h4>é¤Œã‚„ã‚Šä½“é¨“</h4>
                <p>é¤Œã‚„ã‚Šä½“é¨“ãŒå¯èƒ½</p>
              </div>
            </div>
          </div>
          <div class="about-image">
            <NuxtImg 
              src="/images/building-exterior.jpg" 
              alt="æ·±è°·çˆ¬è™«é¡é¤¨ï¼ˆãƒãƒ£ãƒ³ãƒãƒ«é°ï¼‰å¤–è¦³ - åŸ¼ç‰çœŒæ·±è°·å¸‚ã®çˆ¬è™«é¡å°‚é–€æ–½è¨­"
              class="about-image-img"
              placeholder
            />
          </div>
        </div>
      </div>
    </section>

    <!-- YouTube Section -->
    <section id="youtube" class="section youtube-section">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title">YouTubeãƒãƒ£ãƒ³ãƒãƒ«</h2>
          <p class="section-subtitle">100ä¸‡äººç™»éŒ²è€…ã‚’èª‡ã‚‹ãƒãƒ£ãƒ³ãƒãƒ«</p>
        </div>
        <div class="youtube-content">
          <div class="youtube-stats">
            <div class="stat-card">
              <div class="stat-number">1,010,000+</div>
              <div class="stat-label">ç™»éŒ²è€…æ•°</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">3820+</div>
              <div class="stat-label">å‹•ç”»æ•°</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">963M+</div>
              <div class="stat-label">ç·å†ç”Ÿå›æ•°</div>
            </div>
          </div>
          <div class="youtube-embed">
            <div v-if="isVideoPlaying && latestVideoId" class="youtube-iframe-container">
              <iframe
                :src="`https://www.youtube.com/embed/${latestVideoId}?autoplay=1`"
                title="æœ€æ–°å‹•ç”»"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen
                class="youtube-iframe"
              ></iframe>
            </div>
            <div v-else-if="latestVideoId" class="youtube-thumbnail-container" @click="playVideo">
              <img
                :src="`https://img.youtube.com/vi/${latestVideoId}/maxresdefault.jpg`"
                :alt="videoTitle || 'æœ€æ–°å‹•ç”»'"
                class="youtube-thumbnail"
                @error="handleThumbnailError"
              />
              <div class="youtube-play-overlay">
                <div class="youtube-play-button">
                  <svg viewBox="0 0 68 48" class="youtube-play-icon">
                    <path d="M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.63-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z" fill="#f00"></path>
                    <path d="M 45,24 27,14 27,34" fill="#fff"></path>
                  </svg>
                </div>
              </div>
            </div>
            <div v-else class="embed-placeholder">
              <div class="youtube-icon">â–¶</div>
              <p>{{ loadingVideo ? 'æœ€æ–°å‹•ç”»ã‚’èª­ã¿è¾¼ã¿ä¸­...' : 'æœ€æ–°å‹•ç”»ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ' }}</p>
              <a href="https://www.youtube.com/@WANIVSPBAO" target="_blank" rel="noopener noreferrer" class="btn btn-youtube">ãƒãƒ£ãƒ³ãƒãƒ«ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
          <div class="youtube-description">
            <h3>çˆ¬è™«é¡ã®é­…åŠ›ã‚’å‹•ç”»ã§ç™ºä¿¡</h3>
            <p>
              å½“é¤¨ã®YouTubeãƒãƒ£ãƒ³ãƒãƒ«ã§ã¯ã€çˆ¬è™«é¡ã®ç”Ÿæ…‹ã€é£¼è‚²æ–¹æ³•ã€
              å¸Œå°‘ç¨®ã®ç´¹ä»‹ãªã©ã€æ§˜ã€…ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’é…ä¿¡ã—ã¦ã„ã¾ã™ã€‚
              100ä¸‡äººã‚’è¶…ãˆã‚‹ç™»éŒ²è€…ã®çš†æ§˜ã¨å…±ã«ã€çˆ¬è™«é¡ã®ä¸–ç•Œã‚’
              ã‚ˆã‚Šæ·±ãçŸ¥ã£ã¦ã„ãŸã ã‘ã‚‹ã‚ˆã†ã€æ—¥ã€…ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’åˆ¶ä½œã—ã¦ã„ã¾ã™ã€‚
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Gallery Preview Section -->
    <section id="gallery-preview" class="section gallery-preview">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title">å±•ç¤ºç”Ÿä½“</h2>
          <p class="section-subtitle">100ç¨®é¡ä»¥ä¸Šã®çˆ¬è™«é¡ã‚’å±•ç¤º</p>
        </div>
        <div class="gallery-preview-grid">
          <div 
            v-for="(item, index) in featuredAnimals" 
            :key="index" 
            class="gallery-preview-item"
          >
            <div class="gallery-preview-image">
              <NuxtImg 
                v-if="item.image" 
                :src="item.image" 
                :alt="`${item.name} - æ·±è°·çˆ¬è™«é¡é¤¨ï¼ˆãƒãƒ£ãƒ³ãƒãƒ«é°ï¼‰ã®å±•ç¤ºç”Ÿä½“`"
                placeholder
                class="gallery-preview-img"
              />
              <div v-else class="image-placeholder">{{ item.name }}</div>
            </div>
            <div class="gallery-preview-info">
              <h4>{{ item.name }}</h4>
              <p>{{ item.description }}</p>
            </div>
          </div>
        </div>
        <div class="gallery-preview-action">
          <NuxtLink to="/gallery" class="btn btn-primary">ã‚‚ã£ã¨è¦‹ã‚‹</NuxtLink>
        </div>
      </div>
    </section>

    <!-- Access Section -->
    <section id="access" class="section access">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title">ã‚¢ã‚¯ã‚»ã‚¹ãƒ»å–¶æ¥­æ¡ˆå†…</h2>
          <p class="section-subtitle">æ–½è¨­ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±</p>
        </div>
        <div class="access-content">
          <div class="access-info">
            <div class="info-item">
              <h4>æ‰€åœ¨åœ°</h4>
              <p>ã€’369-1245<br>åŸ¼ç‰çœŒæ·±è°·å¸‚è’å·ï¼‘ï¼“ï¼ï¼‘<br>èŠ±åœ’æ©‹ã®ä¸‹<br>ãƒ›ãƒ†ãƒ«ã‚¹ãƒ‘ãƒ ã®æ¨ª</p>
            </div>
            <div class="info-item">
              <h4>ãŠè»Šã§ãŠè¶Šã—ã®å ´åˆ</h4>
              <p>èŠ±åœ’ICã‹ã‚‰ï¼•åˆ†</p>
            </div>
            <div class="info-item">
              <h4>é›»è»Šã§ãŠè¶Šã—ã®å ´åˆ</h4>
              <p>ãµã‹ã‚„èŠ±åœ’é§…ã‹ã‚‰ å¾’æ­©ï¼’ï¼•åˆ†<br>ã‚¿ã‚¯ã‚·ãƒ¼ï¼‘ï¼åˆ†</p>
            </div>
            <div class="info-item">
              <h4>å–¶æ¥­æ™‚é–“</h4>
              <p>10:00 - 17:00</p>
              <div class="info-links">
                <a href="#" @click.prevent="openCalendarModal" class="info-link">ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¯ã“ã¡ã‚‰</a>
                <a href="#" @click.prevent="openFloorMapModal" class="info-link">ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—ã¯ã“ã¡ã‚‰</a>
              </div>
            </div>
            <div class="info-item">
              <h4>æ–™é‡‘</h4>
              <p>
                å¤§äºº ï¼‘æ™‚é–“ 2,000å††<br>
                å°äºº ï¼‘æ™‚é–“ 1,000å††<br>
                ï¼ˆï¼‘ãƒ‰ãƒªãƒ³ã‚¯ã€ãƒªã‚¯ã‚¬ãƒ¡ã®ã”é£¯ä»˜ãï¼‰<br>
                â€»å¹¼ç¨šåœ’ä»¥ä¸‹å…¥å ´æ–™ç„¡æ–™<br>
                å»¶é•· ï¼‘æ™‚é–“ 1,000å††ï¼ˆï¼‘ãƒ‰ãƒªãƒ³ã‚¯ä»˜ãï¼‰<br>
                ãƒ»è§¦ã‚Œåˆã„ï¼ˆï¼’åˆ†ï¼‰500å††<br>
                ãƒ»è¿½åŠ ãƒ‰ãƒªãƒ³ã‚¯ 100å††<br>
                ãƒ»é¤Œã‚„ã‚Šä½“é¨“ 300ï½500å††ï¼ˆç¨®é¡ã«ã‚ˆã‚‹ï¼‰
              </p>
            </div>
            <div class="info-item">
              <h4>æ³¨æ„äº‹é …</h4>
              <p>
                ãƒ»å½“é¤¨ã¯çˆ¬è™«é¡ã®é©æ­£æ¸©åº¦ã«åˆã‚ã›ã€å®¤æ¸©ãŒç´„30åº¦ã¨ãªã£ã¦ãŠã‚Šã¾ã™ã€‚<br>
                ãƒ»ãŠå­æ§˜ã‚’ãŠé€£ã‚Œã®ãŠå®¢æ§˜ã¯ã€ãŠå­æ§˜ã‹ã‚‰ç›®ã‚’é›¢ã•ãªã„ã‚ˆã†ãŠé¡˜ã„è‡´ã—ã¾ã™ã€‚<br>
                ãƒ»ç”Ÿãç‰©ã¸ã®ã‚¹ãƒˆãƒ¬ã‚¹ã‚’é…æ…®ã—ã€ã‚±ãƒ¼ã‚¸å£é¢ã‚’å©ã„ãŸã‚Šã€æŒ‡ã‚’é€™ã‚ã›ã¦è¿½ã‚ã›ã‚‹ã‚ˆã†ãªè¡Œç‚ºã¯ã”é æ…®é ‚ãã‚ˆã†ãŠé¡˜ã„è‡´ã—ã¾ã™ã€‚<br>
                ãƒ»å†™çœŸã€å‹•ç”»ã®æ’®å½±ã¯è‡ªç”±ã§ã™ãŒã€ãƒ•ãƒ©ãƒƒã‚·ãƒ¥æ’®å½±ã¯ãŠæ§ãˆãã ã•ã„ã€‚
              </p>
            </div>
          </div>
          <div class="access-map">
            <div class="map-container">
              <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3222.935862622581!2d139.24044987600905!3d36.11942027244902!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x601ed06271ed00cd%3A0x3969755bf4a20acb!2z44CSMzY5LTEyNDUg5Z-8546J55yM5rex6LC35biC6I2S5bed77yR77yT4oiS77yR!5e0!3m2!1sja!2sjp!4v1765460783435!5m2!1sja!2sjp" 
                width="100%" 
                height="100%" 
                style="border:0;" 
                loading="lazy" 
                referrerpolicy="no-referrer-when-downgrade"
                class="map-iframe"
              ></iframe>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="section contact">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title">ãŠå•ã„åˆã‚ã›</h2>
          <p class="section-subtitle">ã”è³ªå•ã‚„ãŠå•ã„åˆã‚ã›ã¯ã“ã¡ã‚‰ã‹ã‚‰</p>
        </div>
        <form class="contact-form" @submit.prevent="handleSubmit">
          <div class="form-group">
            <label for="name">ãŠåå‰ <span class="required">*</span></label>
            <input 
              type="text" 
              id="name" 
              v-model="form.name" 
              :class="{ 'error': errors.name }"
              @blur="validateName"
            >
            <span v-if="errors.name" class="error-message">{{ errors.name }}</span>
          </div>
          <div class="form-group">
            <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="required">*</span></label>
            <input 
              type="email" 
              id="email" 
              v-model="form.email" 
              :class="{ 'error': errors.email }"
              @blur="validateEmail"
            >
            <span v-if="errors.email" class="error-message">{{ errors.email }}</span>
          </div>
          <div class="form-group">
            <label for="subject">ä»¶å</label>
            <input 
              type="text" 
              id="subject" 
              v-model="form.subject"
            >
          </div>
          <div class="form-group">
            <label for="message">ãŠå•ã„åˆã‚ã›å†…å®¹ <span class="required">*</span></label>
            <textarea 
              id="message" 
              v-model="form.message" 
              rows="5" 
              :class="{ 'error': errors.message }"
              @blur="validateMessage"
            ></textarea>
            <span v-if="errors.message" class="error-message">{{ errors.message }}</span>
          </div>
          <div v-if="submitMessage" class="submit-message" :class="{ 'success': submitSuccess, 'error': !submitSuccess }">
            {{ submitMessage }}
          </div>
          <button type="submit" class="btn btn-primary" :disabled="isSubmitting">
            {{ isSubmitting ? 'é€ä¿¡ä¸­...' : 'é€ä¿¡' }}
          </button>
        </form>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
interface FeaturedAnimal {
  name: string
  description: string
  image?: string
  category: string
}

const form = ref({
  name: '',
  email: '',
  subject: '',
  message: ''
})

const errors = ref({
  name: '',
  email: '',
  message: ''
})

const isSubmitting = ref(false)
const submitMessage = ref('')
const submitSuccess = ref(false)

// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°
const validateName = () => {
  if (!form.value.name.trim()) {
    errors.value.name = 'ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'
    return false
  }
  if (form.value.name.trim().length < 2) {
    errors.value.name = 'ãŠåå‰ã¯2æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„'
    return false
  }
  errors.value.name = ''
  return true
}

const validateEmail = () => {
  if (!form.value.email.trim()) {
    errors.value.email = 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'
    return false
  }
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
  if (!emailRegex.test(form.value.email)) {
    errors.value.email = 'æ­£ã—ã„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'
    return false
  }
  errors.value.email = ''
  return true
}

const validateMessage = () => {
  if (!form.value.message.trim()) {
    errors.value.message = 'ãŠå•ã„åˆã‚ã›å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'
    return false
  }
  if (form.value.message.trim().length < 10) {
    errors.value.message = 'ãŠå•ã„åˆã‚ã›å†…å®¹ã¯10æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„'
    return false
  }
  errors.value.message = ''
  return true
}

const validateForm = () => {
  const nameValid = validateName()
  const emailValid = validateEmail()
  const messageValid = validateMessage()
  return nameValid && emailValid && messageValid
}

// å±•ç¤ºç”Ÿä½“ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆ3ç¨®é¡ï¼‰
const featuredAnimals: FeaturedAnimal[] = [
  {
    name: 'ãƒ˜ãƒ“ã®ç¨®é¡',
    description: 'æ§˜ã€…ãªç¨®é¡ã®ãƒ˜ãƒ“ã‚’å±•ç¤ºã—ã¦ã„ã¾ã™ã€‚å®Ÿéš›ã«è§¦ã‚Œåˆã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚',
    image: '/images/sample-hebi.jpg',
    category: 'ãƒ˜ãƒ“'
  },
  {
    name: 'ãƒˆã‚«ã‚²ã®ç¨®é¡',
    description: 'ã‚«ãƒ©ãƒ•ãƒ«ã§é­…åŠ›çš„ãªãƒˆã‚«ã‚²ãŸã¡ã‚’é–“è¿‘ã§è¦³å¯Ÿã§ãã¾ã™ã€‚',
    image: '/images/sample-tokage.jpg',
    category: 'ãƒˆã‚«ã‚²'
  },
  {
    name: 'ã‚«ãƒ¡ã®ç¨®é¡',
    description: 'ãƒªã‚¯ã‚¬ãƒ¡ãªã©ã€æ§˜ã€…ãªã‚«ãƒ¡ã‚’å±•ç¤ºã—ã¦ã„ã¾ã™ã€‚é¤Œã‚„ã‚Šä½“é¨“ã‚‚å¯èƒ½ã§ã™ã€‚',
    image: '/images/sample-kame.jpg',
    category: 'ã‚«ãƒ¡'
  }
]

// ãƒ¢ãƒ¼ãƒ€ãƒ«ã®çŠ¶æ…‹ç®¡ç†
const isCalendarModalOpen = ref(false)
const isFloorMapModalOpen = ref(false)

const openCalendarModal = () => {
  isCalendarModalOpen.value = true
}

const closeCalendarModal = () => {
  isCalendarModalOpen.value = false
}

const openFloorMapModal = () => {
  isFloorMapModalOpen.value = true
}

const closeFloorMapModal = () => {
  isFloorMapModalOpen.value = false
}

// æœ€æ–°å‹•ç”»IDã‚’ç›´æ¥æŒ‡å®šï¼ˆAPIã‚­ãƒ¼å–å¾—å¾Œã¯ã€fetchLatestVideo()ã‚’ä½¿ç”¨ï¼‰
const latestVideoId = ref<string | null>('qeTuT0blMjQ')
const videoTitle = ref<string | null>(null)
const loadingVideo = ref(false)
const isVideoPlaying = ref(false)

// å‹•ç”»ã‚’å†ç”Ÿ
const playVideo = () => {
  isVideoPlaying.value = true
}

// ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
const handleThumbnailError = (event: Event) => {
  const img = event.target as HTMLImageElement
  // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: æ¨™æº–è§£åƒåº¦ã®ã‚µãƒ ãƒã‚¤ãƒ«ã‚’ä½¿ç”¨
  if (latestVideoId.value) {
    img.src = `https://img.youtube.com/vi/${latestVideoId.value}/hqdefault.jpg`
  }
}

// æœ€æ–°å‹•ç”»ã‚’å–å¾—ï¼ˆAPIã‚­ãƒ¼å–å¾—å¾Œã«æœ‰åŠ¹åŒ–ï¼‰
// const fetchLatestVideo = async () => {
//   try {
//     loadingVideo.value = true
//     const { data } = await useFetch<{ videoId: string | null; title?: string; thumbnail?: string; error?: string }>('/api/youtube-latest')
//     if (data.value && 'videoId' in data.value && data.value.videoId) {
//       latestVideoId.value = data.value.videoId
//       videoTitle.value = data.value.title || null
//     }
//   } catch (error) {
//     console.error('Failed to fetch latest video:', error)
//   } finally {
//     loadingVideo.value = false
//   }
// }

// onMounted(() => {
//   fetchLatestVideo()
// })

const handleSubmit = async () => {
  // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  if (!validateForm()) {
    submitMessage.value = 'å…¥åŠ›å†…å®¹ã«èª¤ã‚ŠãŒã‚ã‚Šã¾ã™ã€‚ç¢ºèªã—ã¦ãã ã•ã„ã€‚'
    submitSuccess.value = false
    return
  }

  isSubmitting.value = true
  submitMessage.value = ''

  try {
    const { data, error } = await useFetch('/api/contact', {
      method: 'POST',
      body: {
        name: form.value.name.trim(),
        email: form.value.email.trim(),
        subject: form.value.subject.trim() || 'ï¼ˆä»¶åãªã—ï¼‰',
        message: form.value.message.trim()
      }
    })

    if (error.value) {
      throw error.value
    }

    submitMessage.value = 'ãŠå•ã„åˆã‚ã›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼\nå¾Œæ—¥ã€æ‹…å½“è€…ã‚ˆã‚Šã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚'
    submitSuccess.value = true

    // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
    form.value = {
      name: '',
      email: '',
      subject: '',
      message: ''
    }
    errors.value = {
      name: '',
      email: '',
      message: ''
    }

    // 3ç§’å¾Œã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤º
    setTimeout(() => {
      submitMessage.value = ''
    }, 5000)
  } catch (err) {
    console.error('é€ä¿¡ã‚¨ãƒ©ãƒ¼:', err)
    submitMessage.value = 'é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãæ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚'
    submitSuccess.value = false
  } finally {
    isSubmitting.value = false
  }
}

useHead({
  title: 'æ·±è°·çˆ¬è™«é¡é¤¨ | ãƒãƒ£ãƒ³ãƒãƒ«é° | 100ç¨®é¡ä»¥ä¸Šã®çˆ¬è™«é¡ã‚’å±•ç¤ºã™ã‚‹å°‚é–€æ–½è¨­',
  meta: [
    { name: 'description', content: 'æ·±è°·çˆ¬è™«é¡é¤¨ï¼ˆãƒãƒ£ãƒ³ãƒãƒ«é°ï¼‰ã¯ã€åŸ¼ç‰çœŒæ·±è°·å¸‚ã«ã‚ã‚‹100ç¨®é¡ä»¥ä¸Šã®çˆ¬è™«é¡ã‚’å±•ç¤ºã™ã‚‹å°‚é–€æ–½è¨­ã§ã™ã€‚ãƒˆã‚«ã‚²ã€ãƒ˜ãƒ“ã€ã‚«ãƒ¡ã€ãƒ¯ãƒ‹ãªã©æ§˜ã€…ãªçˆ¬è™«é¡ã‚’é–“è¿‘ã§è¦³å¯Ÿã§ãã€è§¦ã‚Œåˆã„ä½“é¨“ã‚„é¤Œã‚„ã‚Šä½“é¨“ã‚‚å¯èƒ½ã§ã™ã€‚YouTubeãƒãƒ£ãƒ³ãƒãƒ«ç™»éŒ²è€…100ä¸‡äººã‚’èª‡ã‚‹çˆ¬è™«é¡å°‚é–€æ–½è¨­ã§ã™ã€‚' },
    { name: 'keywords', content: 'æ·±è°·çˆ¬è™«é¡é¤¨,ãƒãƒ£ãƒ³ãƒãƒ«é°,çˆ¬è™«é¡é¤¨,çˆ¬è™«é¡,ãƒ˜ãƒ“,ãƒˆã‚«ã‚²,ã‚«ãƒ¡,ãƒ¯ãƒ‹,åŸ¼ç‰çœŒ,æ·±è°·å¸‚,çˆ¬è™«é¡å±•ç¤º,è§¦ã‚Œåˆã„ä½“é¨“,é¤Œã‚„ã‚Šä½“é¨“,YouTube,ãƒãƒ£ãƒ³ãƒãƒ«é°YouTube,æ·±è°·å¸‚çˆ¬è™«é¡é¤¨' },
    { property: 'og:title', content: 'æ·±è°·çˆ¬è™«é¡é¤¨ | ãƒãƒ£ãƒ³ãƒãƒ«é° | 100ç¨®é¡ä»¥ä¸Šã®çˆ¬è™«é¡ã‚’å±•ç¤ºã™ã‚‹å°‚é–€æ–½è¨­' },
    { property: 'og:description', content: 'æ·±è°·çˆ¬è™«é¡é¤¨ï¼ˆãƒãƒ£ãƒ³ãƒãƒ«é°ï¼‰ã¯ã€åŸ¼ç‰çœŒæ·±è°·å¸‚ã«ã‚ã‚‹100ç¨®é¡ä»¥ä¸Šã®çˆ¬è™«é¡ã‚’å±•ç¤ºã™ã‚‹å°‚é–€æ–½è¨­ã§ã™ã€‚ãƒˆã‚«ã‚²ã€ãƒ˜ãƒ“ã€ã‚«ãƒ¡ã€ãƒ¯ãƒ‹ãªã©æ§˜ã€…ãªçˆ¬è™«é¡ã‚’é–“è¿‘ã§è¦³å¯Ÿã§ãã€è§¦ã‚Œåˆã„ä½“é¨“ã‚„é¤Œã‚„ã‚Šä½“é¨“ã‚‚å¯èƒ½ã§ã™ã€‚' },
    { property: 'og:url', content: 'https://fukayahachu.com' },
    { property: 'og:image', content: 'https://fukayahachu.com/images/building-exterior.jpg' },
    { name: 'twitter:title', content: 'æ·±è°·çˆ¬è™«é¡é¤¨ | ãƒãƒ£ãƒ³ãƒãƒ«é°' },
    { name: 'twitter:description', content: '100ç¨®é¡ä»¥ä¸Šã®çˆ¬è™«é¡ã‚’å±•ç¤ºã™ã‚‹å°‚é–€æ–½è¨­ã€‚è§¦ã‚Œåˆã„ä½“é¨“ã‚„é¤Œã‚„ã‚Šä½“é¨“ã‚‚å¯èƒ½ã§ã™ã€‚' }
  ],
  script: [
    {
      type: 'application/ld+json',
      innerHTML: JSON.stringify({
        '@context': 'https://schema.org',
        '@type': 'Zoo',
        name: 'æ·±è°·çˆ¬è™«é¡é¤¨',
        alternateName: 'ãƒãƒ£ãƒ³ãƒãƒ«é°',
        description: 'æ·±è°·çˆ¬è™«é¡é¤¨ã¯ã€åŸ¼ç‰çœŒæ·±è°·å¸‚ã«ã‚ã‚‹100ç¨®é¡ä»¥ä¸Šã®çˆ¬è™«é¡ã‚’å±•ç¤ºã™ã‚‹å°‚é–€æ–½è¨­ã§ã™ã€‚',
        url: 'https://fukayahachu.com',
        logo: 'https://fukayahachu.com/images/logo.png',
        image: 'https://fukayahachu.com/images/building-exterior.jpg',
        address: {
          '@type': 'PostalAddress',
          addressCountry: 'JP',
          addressRegion: 'åŸ¼ç‰çœŒ',
          addressLocality: 'æ·±è°·å¸‚',
          streetAddress: 'è’å·ï¼‘ï¼“ï¼ï¼‘',
          postalCode: '369-1245'
        },
        geo: {
          '@type': 'GeoCoordinates',
          latitude: '36.11942027244902',
          longitude: '139.24044987600905'
        },
        openingHoursSpecification: {
          '@type': 'OpeningHoursSpecification',
          dayOfWeek: [
            'Monday',
            'Tuesday',
            'Wednesday',
            'Thursday',
            'Friday',
            'Saturday',
            'Sunday'
          ],
          opens: '10:00',
          closes: '17:00'
        },
        priceRange: 'Â¥1,000-Â¥2,000',
        sameAs: [
          'https://www.youtube.com/@WANIVSPBAO',
          'https://twitter.com/wanivspbao',
          'https://channelwani.base.shop/'
        ]
      })
    }
  ]
})
</script>

<style scoped>
.page-index {
  padding-top: 0;
}

.about {
  background: var(--light-secondary);
}

.about-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 4rem;
  align-items: center;
}

.about-text h3 {
  font-size: 2rem;
  margin-bottom: 1.5rem;
  color: var(--primary-color);
}

.about-text p {
  font-size: 1.1rem;
  line-height: 1.8;
  margin-bottom: 1.5rem;
  color: var(--text-secondary);
}

.features {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 2rem;
  margin-top: 3rem;
}

.feature-card {
  background: var(--light-bg);
  padding: 2rem;
  border-radius: 15px;
  text-align: center;
  transition: all 0.3s ease;
  border: 1px solid rgba(45, 134, 89, 0.2);
  box-shadow: var(--shadow-card);
}

.feature-card:hover {
  transform: translateY(-10px);
  box-shadow: var(--shadow);
  border-color: var(--primary-color);
}

.feature-icon {
  font-size: 3rem;
  margin-bottom: 1rem;
}

.feature-card h4 {
  font-size: 1.2rem;
  margin-bottom: 0.5rem;
  color: var(--dark-text);
}

.feature-card p {
  color: var(--text-light);
  font-size: 0.9rem;
}

.about-image-img {
  width: 100%;
  height: 400px;
  object-fit: cover;
  border-radius: 20px;
  box-shadow: var(--shadow-card);
}

.gallery-preview {
  background: var(--light-bg);
}

.gallery-preview-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-bottom: 3rem;
}

.gallery-preview-item {
  background: var(--light-secondary);
  border-radius: 20px;
  overflow: hidden;
  transition: all 0.3s ease;
  border: 1px solid rgba(45, 134, 89, 0.2);
  box-shadow: var(--shadow-card);
}

.gallery-preview-item:hover {
  transform: translateY(-10px);
  box-shadow: var(--shadow);
  border-color: var(--primary-color);
}

.gallery-preview-image {
  width: 100%;
  aspect-ratio: 4/3;
  overflow: hidden;
}

.gallery-preview-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.gallery-preview-item:hover .gallery-preview-img {
  transform: scale(1.1);
}

.gallery-preview-image .image-placeholder {
  width: 100%;
  height: 100%;
  background: var(--gradient-1);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--light-bg);
  font-size: 1.2rem;
  font-weight: 600;
}

.gallery-preview-info {
  padding: 1.5rem;
}

.gallery-preview-info h4 {
  font-size: 1.3rem;
  margin-bottom: 0.5rem;
  color: var(--dark-text);
}

.gallery-preview-info p {
  color: var(--text-light);
  line-height: 1.6;
}

.gallery-preview-action {
  text-align: center;
  margin-top: 2rem;
}

.youtube-section {
  background: linear-gradient(135deg, #FFFFFF 0%, #FFF5F5 50%, #FFFFFF 100%);
  position: relative;
}

.youtube-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #FF0000 0%, #CC0000 100%);
}

.youtube-section .section-title {
  background: linear-gradient(135deg, #FF0000 0%, #CC0000 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.youtube-content {
  display: flex;
  flex-direction: column;
  gap: 3rem;
}

.youtube-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 2rem;
}

.stat-card {
  background: linear-gradient(135deg, #FF0000 0%, #CC0000 100%);
  padding: 2.5rem;
  border-radius: 20px;
  text-align: center;
  box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);
  transition: all 0.3s ease;
}

.stat-card:hover {
  transform: translateY(-10px) scale(1.05);
  box-shadow: 0 8px 25px rgba(255, 0, 0, 0.4);
  background: linear-gradient(135deg, #FF1A1A 0%, #E60000 100%);
}

.stat-number {
  font-size: 3rem;
  font-weight: 900;
  margin-bottom: 0.5rem;
  color: #FFFFFF;
}

.stat-label {
  font-size: 1.1rem;
  color: #FFFFFF;
  opacity: 0.95;
}

.youtube-embed {
  width: 100%;
  aspect-ratio: 16/9;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: var(--shadow);
}

.youtube-iframe-container {
  width: 100%;
  height: 100%;
  position: relative;
}

.youtube-iframe {
  width: 100%;
  height: 100%;
  border: none;
  border-radius: 20px;
}

.youtube-thumbnail-container {
  width: 100%;
  height: 100%;
  position: relative;
  cursor: pointer;
  overflow: hidden;
  border-radius: 20px;
}

.youtube-thumbnail {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.youtube-thumbnail-container:hover .youtube-thumbnail {
  transform: scale(1.05);
}

.youtube-play-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.3);
  transition: background 0.3s ease;
}

.youtube-thumbnail-container:hover .youtube-play-overlay {
  background: rgba(0, 0, 0, 0.5);
}

.youtube-play-button {
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 0, 0, 0.9);
  border-radius: 50%;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4);
}

.youtube-thumbnail-container:hover .youtube-play-button {
  transform: scale(1.1);
  box-shadow: 0 6px 20px rgba(255, 0, 0, 0.6);
}

.youtube-play-icon {
  width: 68px;
  height: 48px;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.embed-placeholder {
  width: 100%;
  height: 100%;
  background: #FFF5F5;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  border: 2px dashed #FF0000;
}

.youtube-icon {
  font-size: 4rem;
  color: #FF0000;
}

.youtube-description {
  text-align: center;
  max-width: 800px;
  margin: 0 auto;
}

.youtube-description h3 {
  font-size: 2rem;
  margin-bottom: 1rem;
  color: #FF0000;
}

.youtube-description p {
  font-size: 1.1rem;
  line-height: 1.8;
  color: var(--text-secondary);
}

.access {
  background: var(--light-bg);
}

.access-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 4rem;
  align-items: start;
}

.access-info {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.info-item {
  background: var(--light-secondary);
  padding: 2rem;
  border-radius: 15px;
  border-left: 4px solid var(--primary-color);
  box-shadow: var(--shadow-card);
}

.info-item h4 {
  font-size: 1.3rem;
  margin-bottom: 1rem;
  color: var(--primary-color);
}

.info-item p {
  color: var(--text-secondary);
  line-height: 1.8;
}

.info-links {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-top: 1rem;
}

.info-link {
  color: var(--primary-color);
  text-decoration: none;
  font-weight: 600;
  transition: all 0.3s ease;
  display: inline-block;
  padding: 0.5rem 0;
  border-bottom: 2px solid transparent;
}

.info-link:hover {
  color: var(--secondary-color);
  border-bottom-color: var(--secondary-color);
  transform: translateX(5px);
}

.modal-image {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 10px;
}

.access-map {
  position: sticky;
  top: 100px;
}

.map-container {
  width: 100%;
  height: 400px;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: var(--shadow-card);
}

.map-iframe {
  width: 100%;
  height: 100%;
  border: none;
  border-radius: 20px;
}

.contact {
  background: var(--light-secondary);
}

.contact-form {
  max-width: 600px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.form-group label {
  font-weight: 600;
  color: var(--dark-text);
}

.form-group input,
.form-group textarea {
  padding: 1rem;
  background: var(--light-bg);
  border: 2px solid rgba(45, 134, 89, 0.3);
  border-radius: 10px;
  color: var(--dark-text);
  font-family: inherit;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.form-group input:focus,
.form-group textarea:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(45, 134, 89, 0.1);
}

.form-group textarea {
  resize: vertical;
  min-height: 150px;
}

.form-group .required {
  color: #e74c3c;
  margin-left: 0.25rem;
}

.form-group input.error,
.form-group textarea.error {
  border-color: #e74c3c;
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
}

.error-message {
  display: block;
  color: #e74c3c;
  font-size: 0.875rem;
  margin-top: 0.5rem;
  font-weight: 500;
}

.submit-message {
  padding: 1rem;
  border-radius: 10px;
  margin-bottom: 1rem;
  font-weight: 600;
  white-space: pre-line;
}

.submit-message.success {
  background: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.submit-message.error {
  background: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none !important;
}

.btn-youtube {
  background: #FF0000;
  color: #FFFFFF;
  border: 2px solid #FF0000;
  box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);
}

.btn-youtube:hover {
  background: #CC0000;
  border-color: #CC0000;
  color: #FFFFFF;
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(255, 0, 0, 0.4);
}

@media (max-width: 968px) {
  .about-content,
  .access-content {
    grid-template-columns: 1fr;
  }
  
  .features {
    grid-template-columns: 1fr;
  }
  
  .youtube-stats {
    grid-template-columns: 1fr;
  }
  
  .gallery-preview-grid {
    grid-template-columns: 1fr;
  }
}
</style>

